@model IEnumerable<Capstone.Models.Attendance>

@{
    ViewBag.Title = "IndexReport";
}

<head>
    <link href="~/Content/jquery.datetimepicker.min.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-3.1.1.js"></script>
    <script src="~/Scripts/jquery.datetimepicker.full.js"></script>
</head>

<h2>Index</h2>

<table class="table">
    <tr>
        <th>
            Select Date Range
        </th>
        @using (Html.BeginForm("IndexReport", "Attendances", FormMethod.Post))
        {
            <th>
                @Html.TextBox("startDate", null, new { @class = "date-time-dropdown", type = "datetime" })
                @Html.TextBox("endDate", null, new { @class = "date-time-dropdown", type = "datetime" })

                <input type="submit" value="Submit">
            </th>
        }
    </tr>
</table>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Date)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Service)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SundaySchool)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Guest)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Total)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @*@item.Date.ToString("dd/MM/yyyy")*@
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Service)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.SundaySchool)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Guest)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Total)
            </td>
        </tr>
    }
    <tr>
        <th>
            Average Attendance
        </th>
        <th>
            @ViewBag.AvgService
        </th>
        <th>
            @ViewBag.AvgSundaySchool
        </th>
        <th>
            @ViewBag.AvgGuest
        </th>
        <th>
            @ViewBag.AvgTotal
        </th>
    </tr>
</table>

<script>
    $('.date-time-dropdown').datetimepicker({
        timepicker: false,
        step: 15,
        format: 'm/d/Y'
    });

</script>